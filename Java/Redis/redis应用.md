## 1.解决Session共享问题

session cookie区别

session如何保存用户信息

cookie如何保存

### 1.3 Redis解决多台服务器session共享问题

将用户信息存入Redis，用户名的电话号码是敏感信息，不宜当中key；

以一个随机字符串token为key，后端将随机生成的token字符串返回给前端，前端访问时携带这个token；

用户登录一次，便重新刷新缓存一次。

缓存刷新：单独配置一个拦截器，拦截所有请求，刷新缓存

## 2. Redis作为缓存

用户的请求如果都访问数据库，很容易造成数据库崩溃；

Redis是基于内存的，内存的访问速度大于磁盘，使用Redis作为缓存数据的中间件

请求先访问Redis，如果Redis存在数据，则直接返回，如果不存在，再去数据库里面查询，将查询到的数据存入Redis，再返回结果

### 2.1 数据库缓存不一致问题

数据库发生变化，缓存没有改变，导致用户拿到的是旧数据

解决方法：

更新数据库，更新缓存/删除缓存？

*   更新缓存：每次更新数据库都更新缓存，无效写操作较多
*   删除缓存：更新数据库时直接删除缓存，查询时再加入缓存

删除缓存(写操作比删除操作要慢，并非每个数据都是立刻使用的，用到的时候再加载，懒加载)

先更新数据库还是先删除缓存？

*   先删除缓存再更新数据库
*   先更新数据库再删除缓存

先更新数据库再删除缓存(必须保证两个操作都成功，否则还是会数据不一致问题)

如何保证两个操作(更新数据库再删除缓存)同时成功？

### 2.2 缓存雪崩、缓存击穿、缓存穿透解决方案？

缓存雪崩：大量的数据在同一个时刻过期

缓存击穿：热门key在某一时刻失效，大量请求访问数据库

解决方法：使用互斥锁或者逻辑过期时间

缓存穿透：要访问的数据在数据库和缓存都不存在

解决办法：布隆过滤器或者redis存入空值返回

## 3.点赞功能
